<h1><%= t('pages.index.title') %></h1>

<table class="table">
  <thead>
    <th><%= t('pages.slug') %></th>
    <th><%= t('pages.title') %></th>
    <% if can? :create, Page %>
      <th colspan="2"><%= t('pages.actions') %></th>
    <% end %>
  </thead>
  <tbody>
    <% @pages.each do |page| %>
      <tr>
        <td><%= page.slug %></td>
        <td><%= link_to page.title, view_page_path(page.slug) %></td>
        <% if can? :create, Page %>
          <td><%= link_to t('pages.edit_page'), edit_page_path(page), class: "btn btn-primary" %></td>
          <td><%= link_to t('pages.delete_page'), page, method: :delete, data: { confirm: t('pages.index.confirm_message') }, class: "btn btn-primary" %></td>
        <% end %>
      </tr>
    <% end %>
    <% if can? :create, Page %>
      <tr>
        <td colspan="4">
          <%= link_to t('pages.add_page'), new_page_path, class: "btn btn-primary" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>